<?php

//Settings.php -> Objects Redirector

//If an object is selected
if(isset($_["name"])){
	$object_name = $_["name"]; //Get object directory name
	$tab = isset($_["tab"]) ? $_["tab"] : false; //Is a tab selected?

//Variables
	$object_dir = USER_OBJECTS.$object_name; //Directory of object
	$object_icon = USER_OBJECTS.$object_name."/icon.png"; //Icon of object (32x32)
	$object_longname = Variable::ObjectName($object_dir); //Translatable name of object
//////
	

//Generating Header
	$tpl->assign("text",$object_longname); 
	$tpl->assign("image",$object_icon);
	$tpl->draw(CORE_VIEWS."text/h1_image");

//3th Menu Navbar generation
	include(CORE_VIEWS."menu/objects.view");

//If a tab is selected redirected to the correct form
	if($tab){
		switch ($tab) {
			//Help Tabs
			case "help":
			Draw::md2help($object_name);
			break;

			//Actions Tabs
			case "action":
			$dir_list = Functions::getdir(USER_OBJECTS.$object_name."/actions/");
			include(CORE_VIEWS."/menu/menu_md.view");
			if($dir_list > 0){
				//@todo If only one action redirect
				if(!isset($_["action"])){ //Available actions

					include(CORE_VIEWS."datatable/dbtable_actions.view");
				}
				else{ //Selected Action
					include(CORE_FORMS."/settings/objects/action.form");
				}
			}
			else
			{
				echo "No actions";
			}
			break;

			//Electronics Tabs
			case "gpios": //If action object have different gpios
			include(CORE_FORMS."/settings/objects/gpios.form");
			break;

			case "electronics": //If action object have same gpios
			include(CORE_FORMS."/settings/objects/electronics.form");
			break;

			//Codes Tabs
			case "codes":
			include(CORE_FORMS."/settings/objects/codes.form");
			break;

			case "groups":
			include(CORE_FORMS."/settings/objects/groups.form");
			break;

			//Unknown Tab
			//default:
			//echo "default";
			//break;
		}
	}

}
else{
	?>
	<h1>Add Objects</h1>
	<div class="form-group">


		<input class="form-control" type='text' id="searchterms">
		<br>

			<button class="btn btn-info" id="searchbuttons" onclick="getplugins(this,'madnerds')">Search for plugins</button>

</div>
	</div>
	<span id="search_info" class="label label-info">Waiting for input</span>
	<span id="plugin_list"></span>

	<?php
	//include(CORE_DATAS."remoteplugins.data");
}



?>